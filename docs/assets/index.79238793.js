var q=Object.defineProperty,A=Object.defineProperties;var M=Object.getOwnPropertyDescriptors;var p=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var L=(e,n,t)=>n in e?q(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,v=(e,n)=>{for(var t in n||(n={}))w.call(n,t)&&L(e,t,n[t]);if(p)for(var t of p(n))I.call(n,t)&&L(e,t,n[t]);return e},y=(e,n)=>A(e,M(n));var N=(e,n)=>{var t={};for(var i in e)w.call(e,i)&&n.indexOf(i)<0&&(t[i]=e[i]);if(e!=null&&p)for(var i of p(e))n.indexOf(i)<0&&I.call(e,i)&&(t[i]=e[i]);return t};import{j as B,a as H,L as Q,m as F,l as a,y as b,p as V,S}from"./vendor.048513e3.js";const W=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}};W();const K="modulepreload",C={},U="/doc-gen/",P=function(n,t){return!t||t.length===0?n():Promise.all(t.map(i=>{if(i=`${U}${i}`,i in C)return;C[i]=!0;const r=i.endsWith(".css"),s=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${s}`))return;const o=document.createElement("link");if(o.rel=r?"stylesheet":K,r||(o.as="script",o.crossOrigin=""),o.href=i,document.head.appendChild(o),r)return new Promise((l,u)=>{o.addEventListener("load",l),o.addEventListener("error",u)})})).then(()=>n())},c=B,h=H,_=new Q,z=new F,G=({templateId:e,output:n})=>{const[t,i]=a(""),[r,s]=a([]);return b(()=>{P(()=>Promise.resolve({}),["assets/gutenberg.min.a02894da.css"]).then(o=>{document.head.innerHTML+=`<link rel="stylesheet" href="${o}" type="text/css"/>`}),fetch(`templates/${e}/template.md`).then(o=>o.text()).then(o=>{if(!o){s([]);return}s(_.parse(o))})},[]),b(()=>{if(!r.length){i("");return}_.render(r,n).then(o=>{i(z.render(o))}).then(()=>window.print())},[r,n]),r.length?c("div",{dangerouslySetInnerHTML:{__html:t}}):c("div",{children:"Loading..."})};function J(e,{choice:n,question:t,section:i}){const r=e[i.id]||{};return y(v({},e),{[i.id]:y(v({},r),{[t.id]:n.text})})}function R(){return V(J,{})}var g;(function(e){e[e.NoSkip=0]="NoSkip",e[e.MaySkipButNoAnswer=1]="MaySkipButNoAnswer",e[e.Skip=2]="Skip"})(g||(g={}));function j(e,n,t){var l;const i=t.choices;if(!i)return{result:0};const r=i.filter(u=>typeof u!="string"&&u.next!==void 0);if(!r.length)return{result:0};const s=(l=n[e.id])==null?void 0:l[t.id];if(s===void 0)return{result:1};const o=r.find(u=>u.text===s);return o?{result:2,sectionId:o.next}:{result:0}}const X=({section:e,question:n,dispatch:t})=>{const i=r=>{t({section:e,question:n,choice:r})};return h("div",{children:[c("h3",{children:n.text}),c(D,{question:n,onChange:i})]})},Y=({onChange:e})=>c("input",{onInput:n=>{e(n.currentTarget.value)}}),Z=({choice:e,questionId:n,onChange:t})=>h("div",{children:[c("input",{type:"radio",id:e.text,name:n,value:e.text,onChange:i=>{!i.currentTarget.checked||t({text:e.text})}}),c("label",{class:"label-inline",for:e.text,children:e.text})]}),D=({question:e,onChange:n})=>{if(!e.choices)return c(Y,{onChange:r=>{n({text:r})}});const t=e.id,i=e.choices.map(r=>typeof r!="string"?r:{text:r}).map(r=>c(Z,{choice:r,questionId:t,onChange:n},r.text));return c("ul",{children:i})};function ee(e,n){const t=e.questions.findIndex(i=>j(e,n,i).result!==g.NoSkip);return t===-1?e.questions:e.questions.slice(0,t+1)}const te=i=>{var r=i,{section:e,dispatch:n}=r,t=N(r,["section","dispatch"]);const s=ee(e,t.output).map(o=>c(X,{section:e,dispatch:n,question:o},o.id));return h("div",{children:[c("div",{children:s}),h("div",{children:[c("button",{type:"button",class:"button button-outline",onClick:t.onPrevious,disabled:!t.showPrevious,children:"Previous"})," ",c("button",{type:"button",class:"button button-outline",onClick:t.onNext,disabled:!t.showNext,children:"Next"}),!t.showNext&&c("div",{class:"float-right",children:c("button",{type:"button",class:"button",onClick:t.onNext,children:"Complete"})})]})]})},ne=({templateId:e,onComplete:n})=>{const[t,i]=R(),[r,s]=a(""),[o,l]=a([]),[u,f]=a(0);b(()=>{f(0),P(()=>Promise.resolve({}),["assets/milligram.min.03686d49.css"]),fetch(`templates/${e}/questions.json`).then(d=>d.json()).then(d=>{s(d.title),l(d.sections)})},[]);const m=o[u];if(!m)return c("div",{children:"Loading..."});const E=()=>{for(const d of m.questions){const x=j(m,t,d);if(x.result!==g.Skip)continue;if(x.sectionId===""){n(t);return}const k=o.findIndex(T=>T.id===x.sectionId);if(k){f(k);return}}u===o.length-1&&n(t),f(u+1)};return h("div",{class:"container",children:[c("h1",{children:r}),c("hr",{}),c(te,{output:t,section:m,dispatch:i,showNext:u<o.length-1,showPrevious:u>0,onNext:E,onPrevious:()=>f(u-1)})]})};function re(){return new URL(location.href).searchParams.get("template")||"example"}const O=re(),$=document.getElementById("app"),ie=e=>{S(c(G,{templateId:O,output:e}),$)};S(c(ne,{templateId:O,onComplete:ie}),$);
