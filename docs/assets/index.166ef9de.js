var y=Object.defineProperty,C=Object.defineProperties;var v=Object.getOwnPropertyDescriptors;var f=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var m=(t,e,r)=>e in t?y(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,d=(t,e)=>{for(var r in e||(e={}))F.call(e,r)&&m(t,r,e[r]);if(f)for(var r of f(e))j.call(e,r)&&m(t,r,e[r]);return t},l=(t,e)=>C(t,v(e));import{j as w,a as T,F as I,p as L,L as O,m as S,l as u,y as h,S as b}from"./vendor.732b2143.js";const q=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerpolicy&&(i.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?i.credentials="include":n.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}};q();const s=w,a=T,N=I,P=({section:t,question:e,dispatch:r})=>{const o=n=>{r({section:t,question:e,choice:n})};return a("div",{children:[s("h3",{children:e.text}),s(A,{question:e,onChange:o})]})},$=({onChange:t})=>s("input",{onInput:e=>{t(e.currentTarget.value)}}),k=({choice:t,questionId:e,onChange:r})=>a("div",{children:[s("input",{type:"radio",id:t.text,name:e,value:t.text,onChange:o=>{!o.currentTarget.checked||r({text:t.text})}}),s("label",{for:t.text,children:t.text})]}),A=({question:t,onChange:e})=>{if(!t.choices)return s($,{onChange:n=>{e({text:n})}});const r=t.id,o=t.choices.map(n=>typeof n!="string"?n:{text:n}).map(n=>s(k,{choice:n,questionId:r,onChange:e},n.text));return s("ul",{children:o})},D=({section:t,dispatch:e})=>{const r=t.questions.map(o=>s(P,{section:t,dispatch:e,question:o},o.id));return s("div",{children:r})};function E(t,{choice:e,question:r,section:o}){const n=t[o.id]||{};return l(d({},t),{[o.id]:l(d({},n),{[r.id]:e.text})})}function H(){return L(E,{})}const g=new O,M=new S,Q=({template:t,output:e})=>{const[r,o]=u(""),[n,i]=u([]);return h(()=>{if(!t){i([]);return}i(g.parse(t))},[t]),h(()=>{if(!n.length){o("");return}g.render(n,e).then(c=>{o(M.render(c))})},[n,e]),s("div",{dangerouslySetInnerHTML:{__html:r}})};function x(t){return new Promise(e=>{var n;const r=(n=t.files)==null?void 0:n[0];if(!r){e("");return}const o=new FileReader;o.onload=i=>{var p;const c=(p=i.target)==null?void 0:p.result;e(typeof c=="string"?c:"")},o.readAsText(r)})}const _=({onChange:t})=>{const e=async r=>{r.preventDefault();const o=await x(r.currentTarget);o&&t(o)};return s("input",{type:"file",name:"template",accept:"*.liquid",onChange:r=>e(r)})},B=({onChange:t})=>{const e=async r=>{r.preventDefault();const o=await x(r.currentTarget);if(!o)return;const n=JSON.parse(o);"sections"in n&&t(n.sections)};return s("input",{type:"file",name:"questions",accept:"*.json",onChange:r=>e(r)})};function J(){const[t,e]=H(),[r,o]=u(""),[n,i]=u([]);return a(N,{children:[s("p",{children:"Select questions and output template"}),a("form",{children:[s(B,{onChange:i}),s(_,{onChange:o})]}),n.map(c=>s(D,{section:c,dispatch:e},c.id)),s(Q,{template:r,output:t})]})}b(s(J,{}),document.getElementById("app"));
